<% provide(:title, 'All Users') %>
<div class="container">
  <h1>ユーザー一覧</h1>
  
  <div>
    <%= form_tag users_path, method: :post, multipart: true do |f| %>
      <div class="search_item">
        <%= text_field_tag 'filename',"", id: "filename", disabled: true %>
        <%= file_field_tag 'users_file', id: "file_input", style: "display: none;", onchange: "file_selected($(this));" %>
        <%= button_tag 'ファイル選択', class: %i(btn-primary csv_input_btn), type: 'button', onclick: "$('#file_input').click();" %>
      </div>
      <div>
        <button type="submit" class="btn btn-primary">CSVインポート</button>
      </div>
    <% end %>
  </div>
  
  <script type="text/javascript">
    function file_selected(file_field){
      var filename = $(file_field)[0].files[0].name;
      $("#filename").val(filename);
    }
  </script>
  
  
  <div class="row">
    <ul class="users">
      <% @users.each do |user, user.id| %>
        <li><%= user.name %>
          <div class="panel-group" id="accordion">
            <div class="panel panel-default">
              <div class="panel-heading">
                <div class="panel-title">
                  <button data-toggle="collapse" data-target="#collapse" class="index-edit_button btn btn-primary btn-lg">編集</button>
                </div>
              </div>
              
              <div id="collapse" class="panel-collapse collapse">
                <div class="panel-body">内容</div>
              </div>
             </div>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
</div>

